"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cli_utils_1 = require("@datocms/cli-utils");
class Command extends cli_utils_1.CmaClientCommand {
    async run() {
        const { ENVIRONMENT_ID: envId } = this.parsedArgs;
        try {
            this.startSpinner(`Promoting environment "${envId}"`);
            const result = await this.client.environments.promote(envId);
            this.stopSpinner();
            return result;
        }
        catch (e) {
            if (e instanceof cli_utils_1.CmaClient.ApiError && e.findError('NOT_FOUND')) {
                this.error(`An environment called "${envId}" does not exist!`);
            }
            throw e;
        }
    }
}
exports.default = Command;
Command.description = 'Promotes a sandbox environment to primary';
Command.args = [
    {
        name: 'ENVIRONMENT_ID',
        description: 'The environment to promote',
        required: true,
    },
];
